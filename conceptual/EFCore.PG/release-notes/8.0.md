# 8.0 Release Notes

**The below release notes and breaking changes list aren't yet complete. Check back soon for more notes.**

## New features

New features will be documented later.

## Breaking changes

Note: version 8.0 of the lower-level Npgsql ADO.NET driver, which is used by the EF provider, also has some breaking changes. It's recommended to read the [release notes](../../Npgsql/release-notes/8.0.md) for that as well.

### Obsoleted HasPostgresArrayConversion

With EF 8.0 introducing first-class support for [primitive collections](https://devblogs.microsoft.com/dotnet/announcing-ef8-preview-4), the PostgreSQL driver aligned its PostgreSQL array support to use that. As a result, `HasPostgresArrayConversion` can no longer be used to configure value-converted arrays; instead, the new standard EF mechanism can be used.

For example, the following Npgsql-specific code would configure value conversion for a property of type `MyType[]` to a PostgreSQL array of strings in EF Core 6 or 7:

```c#
modelBuilder.Entity<Blog>().Property(b => b.ValueConvertedArray)
    .HasPostgresArrayConversion(x => x.ToString(), s => MyType.Parse(s));
```

The same can now achieved with the following standard EF 8 code:

```c#
modelBuilder.Entity<Blog>().PrimitiveCollection(b => b.ValueConvertedArray)
    .ElementType()
    .HasConversion(typeof(MyConverter));

class MyConverter : ValueConverter<MyType, string>
{
    public MyConverter()
        : base(x => x.ToString(), s => MyType.Parse(s))
    {
    }
}
```
